<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>LeakAlert Notification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-store" />
  <link rel="icon" href="./favicon.ico">
  
  <!-- Firebase SDK (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging-compat.js"></script>

  <style>
    *{
      box-sizing:border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body{
      height:100vh;
      margin:0;
      display:flex;
      justify-content:center;
      align-items:center;
      background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    }

    .card{
      background:#ffffff;
      padding:42px 52px;
      border-radius:20px;
      box-shadow:0 20px 45px rgba(0,0,0,.28);
      text-align:center;
      width:340px;
    }

    .icon{
      font-size:44px;
      margin-bottom:8px;
    }

    h2{
      margin:0 0 8px 0;
      font-size:26px;
      color:#1f2937;
    }

    p{
      margin:0 0 28px 0;
      font-size:14px;
      color:#6b7280;
    }

    button{
      width:100%;
      border:none;
      padding:15px 28px;
      border-radius:999px;
      font-size:16px;
      font-weight:600;
      cursor:pointer;
      color:#fff;
      background: linear-gradient(135deg,#ff512f,#dd2476);
      box-shadow:0 10px 22px rgba(221,36,118,.45);
      transition: all .2s ease;
    }

    button:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 32px rgba(221,36,118,.6);
    }

    button:active{
      transform:translateY(0);
      box-shadow:0 7px 16px rgba(221,36,118,.45);
    }

    button:disabled{
      background:#9ca3af;
      box-shadow:none;
      cursor:not-allowed;
    }

    .footer{
      margin-top:28px;
      font-size:12px;
      color:#9ca3af;
    }
  </style>
</head>
<body>
  <div id="notifyBanner" style="
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  background:#ff4d4f;
  color:white;
  padding:14px;
  text-align:center;
  font-weight:600;
  z-index:9999;
  ">
  ‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô üîî ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á Browser ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Allow ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
  </div>
  
  <div class="card">
    <div class="icon">üîî</div>

    <h2>LeakAlert</h2>
    <p>‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡∏°‡∏£‡∏±‡πà‡∏ß‡∏ú‡πà‡∏≤‡∏ô Browser</p>

    <!-- ‚ùó id ‡πÄ‡∏î‡∏¥‡∏° ‡πÉ‡∏ä‡πâ main.js ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ -->
    <button id="subscribeBtn">‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>

    <div class="footer">
      TTEI ¬∑ Air Leakage Monitoring
    </div>
  </div>

  <noscript>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î JavaScript</noscript>

  <!-- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î Allow Notification -->
  <script>
const banner = document.getElementById("notifyBanner");
const btn = document.getElementById("subscribeBtn");

function showInitialGuide(){
  banner.innerHTML =
    "üì¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î Allow ‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠";
  banner.style.display = "block";
}

function showAddressBarGuide(){
  banner.innerHTML =
    "üì¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î Allow ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô<br><br>" +
    "‚ö†Ô∏è ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô üîî ‡∏ó‡∏µ‡πà Address Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤";
}

function hideBanner(){
  banner.style.display = "none";
}

btn.addEventListener("click", async () => {

  showInitialGuide();

  let resolved = false;

  const permissionPromise = Notification.requestPermission().then(p => {
    resolved = true;
    return p;
  });

  // ‚è≥ ‡∏´‡∏ô‡πà‡∏ß‡∏á 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
  setTimeout(() => {
    if (!resolved && Notification.permission === "default") {
      showAddressBarGuide();
    }
  }, 2000);

  const permission = await permissionPromise;

  if (permission === "granted") {
    hideBanner();
  }

  if (permission === "denied") {
    banner.innerHTML =
      "‚ùå ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Site Settings ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Allow";
  }
});
  </script>
  
  <!-- ‚ùó main.js ‡πÄ‡∏î‡∏¥‡∏° ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ -->
  <script src="main.js"></script>
</body>
</html>
